{
  "cve_id": "CVE-2023-29942",
  "cwe_ids": [
    "CWE-125"
  ],
  "cvss_vector": "CVSS:3.1/AV:L/AC:L/PR:N/UI:R/S:U/C:N/I:N/A:H",
  "cvss_is_v3": true,
  "repo_name": "llvm/llvm-project",
  "commit_msg": "[mlir][spirv] Handle failed conversions of struct elements (#70005)\n\nLLVMStructTypes could be emitted with some null elements. This caused a\r\ncrash later in the LLVMDialect verifier.\r\n\r\nWe now use `convertTypes` and check that all types were successfully converted before passing them to the `LLVMStructType` constructor.\r\n\r\nSee #59990",
  "commit_hash": "30ca16ec87206294f4ad0e9688c88f32421b343e",
  "git_url": "https://github.com/llvm/llvm-project/commit/30ca16ec87206294f4ad0e9688c88f32421b343e",
  "file_path": "mlir/lib/Dialect/SPIRV/IR/SPIRVTypes.cpp",
  "func_name": "StructType::getElementTypes",
  "func_before": "StructType::ElementTypeRange StructType::getElementTypes() const {\n  return ElementTypeRange(getImpl()->memberTypesAndIsBodySet.getPointer(),\n                          getNumElements());\n}",
  "abstract_func_before": "StructType::ElementTypeRange StructType::getElementTypes() const {\n  return ElementTypeRange(getImpl()->memberTypesAndIsBodySet.getPointer(),\n                          getNumElements());\n}",
  "func_graph_path_before": "llvm/llvm-project/30ca16ec87206294f4ad0e9688c88f32421b343e/SPIRVTypes.cpp/vul/before/0.json",
  "func": "TypeRange StructType::getElementTypes() const {\n  return TypeRange(getImpl()->memberTypesAndIsBodySet.getPointer(),\n                   getNumElements());\n}",
  "abstract_func": "TypeRange StructType::getElementTypes() const {\n  return TypeRange(getImpl()->memberTypesAndIsBodySet.getPointer(),\n                   getNumElements());\n}",
  "func_graph_path": "llvm/llvm-project/30ca16ec87206294f4ad0e9688c88f32421b343e/SPIRVTypes.cpp/vul/after/0.json",
  "diff_func": "--- func_before\n+++ func_after\n@@ -1,4 +1,4 @@\n-StructType::ElementTypeRange StructType::getElementTypes() const {\n-  return ElementTypeRange(getImpl()->memberTypesAndIsBodySet.getPointer(),\n-                          getNumElements());\n+TypeRange StructType::getElementTypes() const {\n+  return TypeRange(getImpl()->memberTypesAndIsBodySet.getPointer(),\n+                   getNumElements());\n }",
  "diff_line_info": {
    "deleted_lines": [
      "StructType::ElementTypeRange StructType::getElementTypes() const {",
      "  return ElementTypeRange(getImpl()->memberTypesAndIsBodySet.getPointer(),",
      "                          getNumElements());"
    ],
    "added_lines": [
      "TypeRange StructType::getElementTypes() const {",
      "  return TypeRange(getImpl()->memberTypesAndIsBodySet.getPointer(),",
      "                   getNumElements());"
    ]
  },
  "is_vul": true,
  "pr_url": "https://github.com/llvm/llvm-project/pull/70005",
  "description": "Failed to get PR details: HTTP Request Error for PR https://github.com/llvm/llvm-project/pull/70005: 403 Client Error: Forbidden for url: https://api.github.com/repos/llvm/llvm-project/pulls/70005",
  "Bug Filter": "Defect Remediation & Feature Upgrades",
  "Bug Filter Confidence": 0.9,
  "Bug Filter Response": "**Final Classification:** Defect Remediation & Feature Upgrades; **Confidence:** 0.9"
}