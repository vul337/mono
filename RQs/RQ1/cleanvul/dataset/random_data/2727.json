{
  "id": 2727,
  "language": "Java",
  "commit_url": "https://github.com/maplibre/maplibre-navigation-android/commit/ea1f82c9bb89ca32a636b8f14c818462b1e14239",
  "commit_sha": "ea1f82c9bb89ca32a636b8f14c818462b1e14239",
  "commit_msg": "Fixed the crash:\nFatal Exception: java.lang.NullPointerException: Attempt to invoke virtual method 'void com.mapbox.mapboxsdk.style.sources.GeoJsonSource.setGeoJson(com.mapbox.geojson.Feature)' on a null object reference\n       at com.mapbox.services.android.navigation.v5.navigation.NavigationMapRoute.updateArrowShaftWith(NavigationMapRoute.java:495)\n       at com.mapbox.services.android.navigation.v5.navigation.NavigationMapRoute.addUpcomingManeuverArrow(NavigationMapRoute.java:355)\n       at com.mapbox.services.android.navigation.v5.route.MapRouteProgressChangeListener.onProgressChange(MapRouteProgressChangeListener.java:26)\n       at com.mapbox.services.android.navigation.v5.navigation.NavigationEventDispatcher.onProgressChange(NavigationEventDispatcher.java:145)\n       at com.mapbox.services.android.navigation.v5.navigation.RouteProcessorThreadListener.onNewRouteProgress(RouteProcessorThreadListener.java:34)\n       at com.mapbox.services.android.navigation.v5.navigation.RouteProcessorHandlerCallback$1.run(RouteProcessorHandlerCallback.java:97)\n       at android.os.Handler.handleCallback(Handler.java:938)\n       at android.os.Handler.dispatchMessage(Handler.java:99)\n       at android.os.Looper.loop(Looper.java:246)\n       at android.app.ActivityThread.main(ActivityThread.java:8633)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n\nthis could accure when the source isn't loaded yet.",
  "pr_url": "https://github.com/maplibre/maplibre-navigation-android/pull/15",
  "pr_info": "Fatal Exception: java.lang.NullPointerException: Attempt to invoke virtual method 'void com.mapbox.mapboxsdk.style.sources.GeoJsonSource.setGeoJson(com.mapbox.geojson.Feature)' on a null object reference\r\n       at com.mapbox.services.android.navigation.v5.navigation.NavigationMapRoute.updateArrowShaftWith(NavigationMapRoute.java:495)\r\n       at com.mapbox.services.android.navigation.v5.navigation.NavigationMapRoute.addUpcomingManeuverArrow(NavigationMapRoute.java:355)\r\n       at com.mapbox.services.android.navigation.v5.route.MapRouteProgressChangeListener.onProgressChange(MapRouteProgressChangeListener.java:26)\r\n       at com.mapbox.services.android.navigation.v5.navigation.NavigationEventDispatcher.onProgressChange(NavigationEventDispatcher.java:145)\r\n       at com.mapbox.services.android.navigation.v5.navigation.RouteProcessorThreadListener.onNewRouteProgress(RouteProcessorThreadListener.java:34)\r\n       at com.mapbox.services.android.navigation.v5.navigation.RouteProcessorHandlerCallback$1.run(RouteProcessorHandlerCallback.java:97)\r\n       at android.os.Handler.handleCallback(Handler.java:938)\r\n       at android.os.Handler.dispatchMessage(Handler.java:99)\r\n       at android.os.Looper.loop(Looper.java:246)\r\n       at android.app.ActivityThread.main(ActivityThread.java:8633)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n\r\nthis could accure when the source isn't loaded yet.",
  "file_name": "libandroid-navigation/src/main/java/com/mapbox/services/android/navigation/v5/navigation/NavigationMapRoute.java",
  "func_name": "updateArrowHeadWith",
  "func_before": "private void updateArrowHeadWith(List<Point> points) {\n        double azimuth = TurfMeasurement.bearing(points.get(points.size() - 2), points.get(points.size() - 1));\n        arrowHeadGeoJsonFeature = Feature.fromGeometry(points.get(points.size() - 1));\n        arrowHeadGeoJsonFeature.addNumberProperty(ARROW_BEARING, (float) MathUtils.wrap(azimuth, 0, MAX_DEGREES));\n        arrowHeadGeoJsonSource.setGeoJson(arrowHeadGeoJsonFeature);\n    }",
  "func_after": "private void updateArrowHeadWith(List<Point> points) {\n        double azimuth = TurfMeasurement.bearing(points.get(points.size() - 2), points.get(points.size() - 1));\n        arrowHeadGeoJsonFeature = Feature.fromGeometry(points.get(points.size() - 1));\n        arrowHeadGeoJsonFeature.addNumberProperty(ARROW_BEARING, (float) MathUtils.wrap(azimuth, 0, MAX_DEGREES));\n        if(arrowHeadGeoJsonSource != null)\n            arrowHeadGeoJsonSource.setGeoJson(arrowHeadGeoJsonFeature);\n    }",
  "diff_func": "--- func_before\n+++ func_after\n private void updateArrowHeadWith(List<Point> points) {\n         double azimuth = TurfMeasurement.bearing(points.get(points.size() - 2), points.get(points.size() - 1));\n         arrowHeadGeoJsonFeature = Feature.fromGeometry(points.get(points.size() - 1));\n         arrowHeadGeoJsonFeature.addNumberProperty(ARROW_BEARING, (float) MathUtils.wrap(azimuth, 0, MAX_DEGREES));\n+        if(arrowHeadGeoJsonSource != null)\n-        arrowHeadGeoJsonSource.setGeoJson(arrowHeadGeoJsonFeature);\n+            arrowHeadGeoJsonSource.setGeoJson(arrowHeadGeoJsonFeature);\n     }",
  "diff_source": "custom"
}